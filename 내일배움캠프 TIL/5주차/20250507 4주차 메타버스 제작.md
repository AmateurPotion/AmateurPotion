# Progress
## 필수 기능
- [x] 캐릭터 이동 및 맵 탐색
	- [x] WASD 또는 화살표를 이용해 2D 캐릭터가 맵을 자유롭게 이동
		- new Input system 응용 개발
	- [x] Rigidbody2D & Collider2D 이용해 자연스런 이동 구현
		- OnMove에서 방향 변수를 저장하고 FixedUpdate에서 이동 구현
	- [x] 맵의 가장자리에서 캐릭터가 멈추도록 설정
		- 빈 공간 타일을 만들고 콜라이더를 설정하여 이동하지 못하도록 설정

- [x] 맵 설계 및 상호작용 영역
	- [x]  간단한 맵을 설계
		- 스크립트상에서 자동 생성
	- [x] 특정 영역에서 상호작용 이벤트 발생
		- 프리팹 소환
		- 프리팹에 플레이어가 가까이 다가갔을 시 오브젝트 강조
	- [x] NPC, 미니 게임 존 등 구현

- [x] 미니 게임 실행
- [x] 점수 시스템
- [x] 게임 종료 및 복귀
- [x] 카메라 추적 기능

## 도전 기능
- [ ] 추가 미니 게임
- [x] 커스텀 캐릭터
- [ ] 리더보드 시스템
- [ ] 탑승물 제작
- [ ] NPC와 대화 시스템

<br>

# Troubleshooting
1. 카메라 추적 구현
	* 요구사항
		* 캐릭터가 이동할 때 카메라가 자연스럽게 따라오는 기능을 구현해야한다.

	* 문제
		* 기존의 대상을 추적하기만 하는 방식으로는 요구 명세의 경계 설정을 충족시키지 못했다.

	* 추론
		* 카메라 경계가 물리적으로 벽에 접촉되는지 검사 후 카메라를 이동시키면 된다고 생각하여 진행하였다.

	* 해결 과정
		a. 타겟 좌표를 기준으로 검사 후 바로 카메라를 추적시켰다.
			-> 추적하는 시간의 오차로 인해 카메라가 맵 밖으로 나가는 현상이 발생하였다.
		b. 카메라를 바로 이동시키되, 벽에 닿으면 이동하지 못하게 구현했다.
			-> 카메라가 벽에 붙으면 고정되버리는 문제가 발생했다.
		c. 타겟 좌표를 추적하는 포커싱 좌표를 추가하고, 포커싱 좌표가 조건에 문제가 없을 시 카메라에 포커싱 좌표를 넣도록 구현하였다.
			-> 정상적으로 범위 제한이 걸리며 카메라 추적이 되게되었지만, 확대나 축소, 크기가 다른 방을 진입했을 시 여전히 밖이 보이는 사례가 발생하였다.
			-> 다른 방을 진입했을 시는 이전 방도 볼 수 있어야해서 냅둬도 되고, 축소시 맵 밖으로 나가는 문제는 카메라가 맵 크기보다 커지지 못하도록 하고, 확대시에는 좌표를 다시 설정해야될 것으로 보인다.

	* 결과
		* 추적과 기본 경계 설정까지는 구현했으나 확대와 축소까지는 완성하지 못하였다.


2. 씬간 메시징 시스템 구축
	* 요구사항
		* 씬 간 데이터 전달을 위해 데이터를 전달할 수 있는 기능이 필요하다.

	* 문제
		* 평소에 사용하던 정적 변수나 싱글톤 방식은 '정적'인 내용이 많아 동적인 데이터를 전달하기에 적합하지 않다고 생각하였다.

	* 해결 과정
		a. 데이터 전달 포맷을 위해 Request 클래스를 생성하고, RequestManager로 데이터 이동을 구현했다.
			->  싱글톤 패턴이다.
		b. 씬마다 있는 이벤트 시스템에 RequestReceiver 컴포넌트를 부착한뒤 씬 로드 후 이벤트시스템에 메소드를 실행하도록 구현한다.
			-> EventSystem이 없으면 데이터를 받지 못하게 되지만, 그래도 SenddMessage 를 기반으로 구현하여 받는 컴포넌트나 오브젝트가 없어도 비교적 안전하게 데이터를 전달받을 수 있었다.

	* 결과
		* 이벤트 시스템을 기반으로 씬간 데이터를 주고받을 수 있게 되었다.

3. 계속 늘어나는 중복되는 애니메이션 에셋
	* 요구사항
		* 단순히 스프라이트만 변경하는건데 애니메이션 에셋이 너무 늘어나서 최적화 필요성을 느꼈다.

	* 문제
		* 중복되는 에셋이 너무 많았다.

	* 해결 과정
		a. 구글링을 통해 Sprite Library asset과 Sprite Resolver란 게 있다는 것을 알게되고 애니메이션에서  리졸버를 통해 스프라이트를 변경하게 하였다.
			-> 각각의 스프라이트는 변경이 되지만, 각 스프라이트에 해당하는 해시값으로 변경함으로써 기존과 비교해 크게 에셋 줄이는데 도움이 되진 않았다.
		b. Label기반으로 Resolver의 스프라이트를 선택할 수 있는 유틸리티 클래스 LibraryAnimator를 만든 후 애니메이션 이벤트를 활용해 스프라이트를 변경했다.
			-> 아무래도 이벤트로 애니메이션 클립을 구성하는 만큼 성능에 걱정이 됬지만, 기존 방식과 달리 라벨을 기반으로 매칭되는 스프라이트를  변경하게 함으로써 기존보다 확실히 애니메이션 에셋을 덜 만들어도 되게 되었다.
			 
	* 결과
		* 일단은 스프라이트 라이브러리 에셋에만 적용되게끔 구현하였지만, 애니메이션 이벤트 작동방식을 보니 다른 형태의 애니메이션에도 적용 가능할 것으로 보인다.
<br>

# Review
* 해보고 싶은 게 있어서 따로 시도해보다보니(멀티플레이어 서버 구축이라던가 ...) 과제에 소홀하게 되버렸다...

<br>

# TODO


#내일배움캠프 #dotnet #csharp #TIL #팀스파르타 #devlog #consoleGame